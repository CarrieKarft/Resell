(this["webpackJsonpreact-rails-api-project-template-client"]=this["webpackJsonpreact-rails-api-project-template-client"]||[]).push([[0],{28:function(e,t,n){},31:function(e,t,n){"use strict";n.r(t);var c=n(0),r=n.n(c),s=n(17),o=n.n(s),i=(n(28),n(7)),u=n(3),j=n(23),a=n(4),l=n(1),b=Object(c.createContext)();function d(e){var t=e.children,n=Object(c.useState)([]),r=Object(a.a)(n,2),s=r[0],o=r[1];return Object(c.useEffect)((function(){fetch("/products").then((function(e){e.ok?e.json().then((function(e){return o(e)})):e.json().catch((function(e){return alert(e.errors)}))}))}),[]),Object(l.jsx)(b.Provider,{value:{products:s,setProducts:o},children:t})}var h=function(e){var t=e.comm;console.log(t);var n=t.comment,c=(t.product_id,t.comment_username);return Object(l.jsxs)("div",{children:[Object(l.jsxs)("h4",{children:[c,":"]}),Object(l.jsx)("p",{children:n})]})};var O=function(e){var t=e.prod;console.log(t);var n=t.description,c=t.minimum_price,r=t.image_url,s=(t.bids,t.highest_bid),o=t.comments,i=t.product_name,u=o.map((function(e){return Object(l.jsx)(h,{comm:e},e.id)}));return Object(l.jsxs)("div",{children:[Object(l.jsx)("img",{src:r,alt:"product picture",className:"productImage"}),Object(l.jsx)("h2",{children:i}),Object(l.jsx)("p",{children:n}),Object(l.jsx)("p",{children:c}),Object(l.jsx)("div",{children:s?Object(l.jsxs)("h3",{children:["Current Highest Bid: ",s]}):Object(l.jsx)("h3",{children:"place your bid now"})}),Object(l.jsxs)("div",{children:[Object(l.jsx)("h3",{children:"comments"}),u]})]})};var p=function(e){Object(j.a)(e);var t=Object(c.useContext)(b).products;console.log(t);var n=t.map((function(e){return Object(l.jsx)(O,{prod:e},e.id)}));return Object(l.jsxs)("div",{children:[Object(l.jsx)("h1",{children:"Products Page"}),n]})};var x=function(e){var t=e.onHandleCreateProduct,n=Object(c.useState)(""),r=Object(a.a)(n,2),s=r[0],o=r[1],i=Object(c.useState)(""),u=Object(a.a)(i,2),j=u[0],b=u[1],d=Object(c.useState)(""),h=Object(a.a)(d,2),O=h[0],p=h[1],x=Object(c.useState)(""),f=Object(a.a)(x,2),m=f[0],g=f[1];return Object(l.jsxs)("div",{children:[Object(l.jsx)("h1",{children:"File Form"}),Object(l.jsxs)("form",{onSubmit:function(e){return function(e){e.preventDefault();var n=new FormData;n.append("description",s),n.append("minimum_price",j),n.append("image",O),n.append("product_name",m),console.log(n),console.log(n.get("description")),t(n)}(e)},children:[Object(l.jsxs)("label",{children:["Product Name",Object(l.jsx)("input",{type:"text",value:m,onChange:function(e){return g(e.target.value)}})]}),Object(l.jsx)("br",{}),Object(l.jsxs)("label",{children:[" Descripition",Object(l.jsx)("input",{type:"text",value:s,onChange:function(e){return o(e.target.value)}})]}),Object(l.jsx)("br",{}),Object(l.jsxs)("label",{children:["Minimum Price",Object(l.jsx)("input",{type:"text",value:j,onChange:function(e){return b(e.target.value)}})]}),Object(l.jsx)("br",{}),Object(l.jsxs)("label",{children:["Image",Object(l.jsx)("input",{type:"file",onChange:function(e){return p(e.target.files[0])}})]}),Object(l.jsx)("br",{}),Object(l.jsx)("input",{type:"submit"})]})]})},f=Object(c.createContext)();function m(e){var t=e.children,n=Object(c.useState)([]),r=Object(a.a)(n,2),s=r[0],o=r[1];return Object(c.useEffect)((function(){fetch("/me").then((function(e){e.ok?e.json().then((function(e){return o(e)})):e.json().catch((function(e){return alert(e.errors)}))}))}),[]),Object(l.jsx)(f.Provider,{value:{currentUser:s,setCurrentUser:o},children:t})}var g=function(e){var t=e.onHandleLoginFetch,n=Object(c.useState)(""),r=Object(a.a)(n,2),s=r[0],o=r[1],i=Object(c.useState)(""),u=Object(a.a)(i,2),j=u[0],b=u[1],d=Object(c.useContext)(f);return d.currentUser,d.setCurrentUser,Object(l.jsxs)("div",{children:[Object(l.jsx)("h1",{children:"Login"}),Object(l.jsxs)("form",{onSubmit:function(e){return function(e){e.preventDefault(),t({username:s,password:j})}(e)},children:[Object(l.jsxs)("label",{children:[" Username",Object(l.jsx)("input",{type:"text",value:s,onChange:function(e){return o(e.target.value)}})]}),Object(l.jsxs)("label",{children:[" Password",Object(l.jsx)("input",{type:"password",value:j,onChange:function(e){return b(e.target.value)}})]}),Object(l.jsx)("input",{type:"submit"})]})]})};var v=function(e){var t=e.handleUserSignupFetch,n=Object(c.useState)(""),r=Object(a.a)(n,2),s=r[0],o=r[1],i=Object(c.useState)(""),u=Object(a.a)(i,2),j=u[0],b=u[1],d=Object(c.useState)(""),h=Object(a.a)(d,2),O=h[0],p=h[1],x=Object(c.useState)(""),f=Object(a.a)(x,2),m=f[0],g=f[1];return Object(l.jsxs)("div",{children:[Object(l.jsx)("h1",{children:"SignupForm"}),Object(l.jsxs)("form",{onSubmit:function(e){return function(e){e.preventDefault();var n={username:j,email:s,password:O,password_confirmation:m};console.log(n),t(n)}(e)},children:[Object(l.jsxs)("lable",{children:[" Username:",Object(l.jsx)("input",{type:"text",value:j,onChange:function(e){return b(e.target.value)}})]}),Object(l.jsxs)("lable",{children:[" Password:",Object(l.jsx)("input",{type:"password",value:O,onChange:function(e){return p(e.target.value)}})]}),Object(l.jsxs)("lable",{children:[" Password Confirmation:",Object(l.jsx)("input",{type:"password",value:m,onChange:function(e){return g(e.target.value)}})]}),Object(l.jsxs)("lable",{children:[" Email:",Object(l.jsx)("input",{type:"text",value:s,onChange:function(e){return o(e.target.value)}})]}),Object(l.jsx)("input",{type:"submit"})]})]})};var C=function(e){var t=e.onHandleLoginFetch,n=e.handleUserSignupFetch;return Object(l.jsxs)("div",{children:[Object(l.jsx)("h1",{children:"SignupPage"}),Object(l.jsx)(g,{onHandleLoginFetch:t}),Object(l.jsx)(v,{handleUserSignupFetch:n})]})},S=n(10);var y=function(e){var t=e.username;return Object(l.jsxs)("div",{children:[Object(l.jsxs)(S.b,{to:"/profile",children:[t,"'s profile"]}),Object(l.jsx)(S.b,{to:"/profile",children:"View Your bids"}),Object(l.jsx)(S.b,{to:"/products-page",children:"View Products"}),Object(l.jsx)(S.b,{to:"/product/new",children:"Upload A New Product"})]})};var P=function(e){var t=e.onHandleLogout,n=Object(c.useContext)(f).currentUser,r=n.products,s=n.username;return console.log(n),console.log(r),Object(l.jsxs)("div",{children:[Object(l.jsx)("h1",{children:"User Profile"}),Object(l.jsx)("button",{onClick:function(){return t()},children:"Logout"}),Object(l.jsxs)("h2",{children:["Hello, ",s]})]})};var w=function(){var e=Object(c.useContext)(b),t=e.products,n=e.setProducts,r=Object(c.useContext)(f),s=r.currentUser,o=r.setCurrentUser;return s?Object(l.jsxs)("div",{className:"App",children:[Object(l.jsx)(y,{username:s.username}),Object(l.jsxs)(u.c,{children:[Object(l.jsx)(u.a,{path:"/profile",element:Object(l.jsx)(P,{onHandleLogout:function(){fetch("/logout",{method:"DELETE"}).then((function(){return o(null)}))}})}),Object(l.jsx)(u.a,{path:"/products-page",element:Object(l.jsx)(p,{})}),Object(l.jsx)(u.a,{path:"/product/new",element:Object(l.jsx)(x,{onHandleCreateProduct:function(e){fetch("/products",{method:"POST",body:e}).then((function(e){e.ok?e.json().then((function(e){return function(e){console.log(e.image_url);var c=[].concat(Object(i.a)(t),[e]);n(c)}(e)})):e.json().catch((function(e){return alert(e.errors)}))}))}})})]})]}):Object(l.jsx)(C,{onHandleLoginFetch:function(e){fetch("/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}).then((function(e){e.ok?e.json().then((function(e){return o(e)})):e.json().then((function(e){return alert(e.error)}))}))},handleUserSignupFetch:function(e){console.log(e),fetch("/signup",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}).then((function(e){e.ok?e.json().then((function(e){return o(e)})):e.json().then((function(e){return alert(e.errors)}))}))}})},F=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,32)).then((function(t){var n=t.getCLS,c=t.getFID,r=t.getFCP,s=t.getLCP,o=t.getTTFB;n(e),c(e),r(e),s(e),o(e)}))};o.a.render(Object(l.jsx)(r.a.StrictMode,{children:Object(l.jsx)(S.a,{children:Object(l.jsx)(d,{children:Object(l.jsx)(m,{children:Object(l.jsx)(w,{})})})})}),document.getElementById("root")),F()}},[[31,1,2]]]);
//# sourceMappingURL=main.d7b34636.chunk.js.map